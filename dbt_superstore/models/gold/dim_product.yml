version: 2

models:
  - name: dim_product
    description: |
      SCD Type 2 Product dimension table tracking historical changes to product attributes.
      Each product can have multiple records representing different versions over time.
      Use is_current = TRUE to get the latest version of each product.
    columns:
      - name: product_sk
        description: "Surrogate key for product dimension version (dbt_scd_id from snapshot)"
        tests:
          - unique
          - not_null
      - name: product_id
        description: "Natural key - original product identifier (not unique due to SCD Type 2)"
        tests:
          - not_null
      - name: product_name
        description: "Product name (tracked for changes)"
        tests:
          - not_null
      - name: category
        description: "Product category (e.g., Furniture, Office Supplies, Technology) - tracked for changes"
        tests:
          - not_null
      - name: sub_category
        description: "Product sub-category - tracked for changes"
        tests:
          - not_null
      - name: dbt_valid_from
        description: "Timestamp when this version of the record became valid"
        tests:
          - not_null
      - name: dbt_valid_to
        description: "Timestamp when this version of the record was superseded (NULL for current records)"
      - name: is_current
        description: "Flag indicating if this is the current/active version of the product (TRUE/FALSE)"
        tests:
          - not_null
      - name: etl_timestamp
        description: "Timestamp when record was last updated by dbt snapshot"
        tests:
          - not_null
